<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                template="../templates/client-template.xhtml">

	<ui:define name="top-menu">
        <ui:include src="../includes/top-bar.xhtml"/>
    </ui:define>

	<ui:define name="title">
        <h2>#{label['user.changepassword']}</h2>
    </ui:define>
    
    <ui:define name="body">
		<p:panel>				
			<div class="change-password-container">
				<h:form id="changePassword">
					<p:messages showSummary="false" showDetail="true">
						<p:autoUpdate/>
					</p:messages>
					<p:panelGrid id="cpPanel" columns="2" layout="grid" styleClass="no-border ui-fluid">
	                    <p:outputLabel for="currentPassword" value="#{label['user.currentpassword']}: *" />
	                    <p:password id="currentPassword" value="#{changePasswordController.currentPassword}" label="#{label['user.currentpassword']}" required="true" />
	                    <p:outputLabel for="newPassword" value="#{label['user.newpassword']}: *" />
	                    <p:password id="newPassword"
	                    			value="#{changePasswordController.newPassword}"
	                    			match="newPasswordConfirm" label="#{label['user.newpassword']}"
	                    			required="true"
	                    			redisplay="#{changePasswordController.redisplay}">
							<f:validateLength minimum="8" maximum="60" />
							<f:validator validatorId="custom.passwordValidator"/>
						</p:password>
	                    <p:outputLabel for="newPasswordConfirm" value="#{label['user.newpasswordconfirm']}: *" />
	                    <p:password id="newPasswordConfirm"
	                    			value="#{changePasswordController.newPasswordConfirm}"
	                    			label="#{label['user.newpasswordconfirm']}"
	                    			required="true"
	                    			redisplay="#{changePasswordController.redisplay}"/>
	                    <p:commandButton value="#{label['user.changepassword']}" styleClass="btn-primary btn-light-blue" validateClient="true" action="#{changePasswordController.changeClientPassword}"/>
			         </p:panelGrid>
		         </h:form>
	         </div>   
		</p:panel>
					
		<h:outputScript library="js" name="validators/password_validator.js"/>
	</ui:define>
	
</ui:composition>